(()=>{var $=Object.defineProperty,tt=Object.defineProperties;var et=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable;var V=(i,t,r)=>t in i?$(i,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[t]=r,F=(i,t)=>{for(var r in t||(t={}))it.call(t,r)&&V(i,r,t[r]);if(M)for(var r of M(t))ot.call(t,r)&&V(i,r,t[r]);return i},A=(i,t)=>tt(i,et(t));var H=`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="24" height="24" rx="4" fill="#F5F5F5"/>
</svg>`,Z=`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="24" height="24" rx="4" fill="#FFDD2D"/>
  <path d="M7 12L10 15L17 8" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>`,j=`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <rect width="24" height="24" rx="4" fill="#FFDD2D"/>
  <rect x="7" y="11" width="10" height="2" fill="black"/>
</svg>`,q=`
<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.5 8L9.34218 2L10.6844 3.42335L6.18436 8L10.6844 12.5766L9.34218 14L3.5 8Z" fill="#126DF7"/>
</svg>`,J=`
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M16.2647 7.36426C13.7935 5.08635 9.94281 5.14665 7.54455 7.54516C5.08419 10.0058 5.08419 13.9946 7.54455 16.4552C10.004 18.9149 13.9933 18.9149 16.4537 16.4552C16.9801 15.9278 17.835 15.9278 18.3624 16.4552C18.8897 16.9817 18.8897 17.8367 18.3624 18.3641C14.8482 21.8786 9.14998 21.8786 5.63494 18.3641C2.12169 14.8496 2.12169 9.15077 5.63494 5.63625C9.08789 2.18294 14.6484 2.12264 18.1752 5.45355L19.4639 4.16565C20.0308 3.59864 21 4.00005 21 4.80195V9.30197C21 9.79877 20.5968 10.202 20.1001 10.202H15.6005C14.7987 10.202 14.3974 9.23267 14.9643 8.66567L16.2647 7.36426Z" fill="#126DF7"/>
</svg>`,c={primary:"#126DF7",secondary:"#F5F5F5",highlight:"#FFDD2D",textPrimary:"#333333",textSecondary:"#595959",button:"#FFDD2D",buttonText:"#333333",subtle:"#999999"},I={h1:{fontSize:56,fontWeight:"bold"},h4:{fontSize:28,fontWeight:"bold"},item:{fontSize:16,fontWeight:"normal"}},n={cornerRadius:24,shadow:{type:"drop-shadow",color:{r:0,g:0,b:0,a:.12},offset:{x:0,y:6},blur:34,spread:0},padding:{horizontal:48,bottom:64,item:20,itemIndent:12,itemGroup:32},button:{width:474,height:56,cornerRadius:12},navigation:{height:64,padding:{left:28,right:28},itemSpacing:2,progress:{width:140,height:8},iconMargin:{left:25,right:23}}};var{widget:nt}=figma,{AutoLayout:R,Text:L}=nt;function K({onSelectChecklist:i,progressStatuses:t}){return figma.widget.h(R,{direction:"vertical",horizontalAlignItems:"center",verticalAlignItems:"center",height:"hug-contents",fill:"#FFFFFF",cornerRadius:n.cornerRadius,padding:n.padding,spacing:16,width:570},figma.widget.h(L,{fontSize:24,fill:c.primary,fontWeight:"bold"},"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0437\u0430\u0434\u0430\u0447\u0443"),figma.widget.h(z,{title:"Define",description:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u044D\u0442\u0430\u043F\u0430 Define",onClick:()=>i("define"),progress:t.define}),figma.widget.h(z,{title:"Research task",description:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u044D\u0442\u0430\u043F\u0430 Research",onClick:()=>i("research"),progress:t.research}),figma.widget.h(z,{title:"Design task",description:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u044D\u0442\u0430\u043F\u0430 Design",onClick:()=>i("design"),progress:t.design}),figma.widget.h(z,{title:"Custom",description:"\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 \u044D\u0442\u0430\u043F\u0430 Custom",onClick:()=>i("custom"),progress:t.custom}))}function z({title:i,description:t,onClick:r,progress:f}){return figma.widget.h(R,{width:"fill-parent",height:"hug-contents",fill:c.secondary,cornerRadius:n.button.cornerRadius,padding:{left:16,right:16,top:12,bottom:12},spacing:8,onClick:r,hoverStyle:{fill:c.primary,opacity:.9}},figma.widget.h(R,{direction:"vertical",width:"fill-parent"},figma.widget.h(L,{fontSize:18,fontWeight:"bold",fill:c.primary},i),figma.widget.h(L,{fontSize:14,fill:c.subtle},t)),figma.widget.h(L,{fontSize:14,fill:c.primary},f,"%"))}var{widget:rt}=figma,{AutoLayout:D,Text:O,SVG:st}=rt;function Q({items:i,handleCheckboxClick:t,checkedItems:r,getItemState:f}){let d=(u,k=0,x=void 0)=>u.map((g,y)=>{var E,G;let{text:o,children:s,type:e}=g,p=e==="h1"||e==="h4",l=((E=I[e])==null?void 0:E.fontSize)||I.item.fontSize,m=((G=I[e])==null?void 0:G.fontWeight)||I.item.fontWeight,C=e==="item"&&x!=="h4"?k>=3?36:24:0,a=e==="h4"?n.padding.itemGroup:4,h=e==="h1"&&x===void 0?28:0,S=f(g),_=S==="selected"?Z:S==="indeterminate"?j:H;return figma.widget.h(D,{key:y,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",spacing:e==="item"?n.padding.item:20,padding:{left:C,top:h,bottom:a}},p?figma.widget.h(O,{fontSize:l,fontWeight:m,fill:p?c.textPrimary:c.textSecondary},o):figma.widget.h(D,{direction:"horizontal",horizontalAlignItems:"center",verticalAlignItems:"center",spacing:12,onClick:()=>t(g)},figma.widget.h(st,{src:_}),figma.widget.h(O,{fontSize:l,fontWeight:m,fill:c.textSecondary},o)),s&&d(s,k+1,e))});return figma.widget.h(D,{padding:{left:n.padding.horizontal,right:n.padding.horizontal,bottom:8}},d(i))}var P=[{text:"Define",type:"h1",children:[{text:"\u041F\u043E\u043D\u0438\u043C\u0430\u043D\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438",type:"h4",children:[{text:"\u041F\u0440\u043E\u0431\u043B\u0435\u043C\u044B \u0438 \u043F\u043E\u0442\u0440\u0435\u0431\u043D\u043E\u0441\u0442\u0438",type:"item",children:[{text:"\u0427\u0442\u043E \u0445\u043E\u0447\u0435\u0442 \u0434\u043E\u0441\u0442\u0438\u0447\u044C \u0431\u0438\u0437\u043D\u0435\u0441",type:"item"},{text:"\u0427\u0442\u043E \u0431\u043E\u043B\u0438\u0442 \u043F\u043E\u043B\u044C\u0437\u043E\u0432\u0430\u0442\u0435\u043B\u044F\u043C",type:"item"},{text:"\u041E\u0431\u043E\u0441\u043D\u043E\u0432\u0430\u043D\u0438\u0435 \u043F\u0440\u043E\u0431\u043B\u0435\u043C\u044B",type:"item"}]},{text:"\u0426\u0435\u043B\u0435\u0432\u0430\u044F \u0430\u0443\u0434\u0438\u0442\u043E\u0440\u0438\u044F",type:"item"},{text:"\u041C\u0435\u0442\u0440\u0438\u043A\u0438 \u0438 \u043F\u043E\u043A\u0430\u0437\u0430\u0442\u0435\u043B\u0438",type:"item",children:[{text:"\u041D\u0430 \u0447\u0442\u043E \u0432\u043B\u0438\u044F\u0435\u043C",type:"item"},{text:"\u041A\u0440\u0438\u0442\u0435\u0440\u0438\u0438 \u0443\u0441\u043F\u0435\u0445\u0430",type:"item"}]},{text:"\u0422\u0435\u043A\u0443\u0449\u0435\u0435 \u0440\u0435\u0448\u0435\u043D\u0438\u0435",type:"item"},{text:"\u041A\u0430\u043A \u0440\u0435\u0448\u0430\u0435\u043C",type:"item"},{text:"\u0424\u0443\u043D\u043A\u0446\u0438\u043E\u043D\u0430\u043B\u044C\u043D\u044B\u0435 \u0442\u0440\u0435\u0431\u043E\u0432\u0430\u043D\u0438\u044F",type:"item"}]},{text:"\u0410\u0440\u0442\u0435\u0444\u0430\u043A\u0442\u044B",type:"h4",children:[{text:"\u0412\u0435\u043D\u043E\u043C \u043F\u043E\u0433\u0440\u0443\u0436\u0435\u043D \u0432 \u043A\u043E\u043D\u0442\u0435\u043A\u0441\u0442 \u0437\u0430\u0434\u0430\u0447\u0438",type:"item"},{text:"\u041F\u043B\u0430\u043D \u0440\u0430\u0431\u043E\u0442 \u043E\u0431\u0441\u0443\u0436\u0434\u0435\u043D \u0441 \u0437\u0430\u043A\u0430\u0437\u0447\u0438\u043A\u043E\u043C/\u043A\u043E\u043C\u0430\u043D\u0434\u043E\u0439",type:"item"}]}]}];var T=[{text:"Research Task 1",type:"item",children:[{text:"Subtask 1",type:"item"},{text:"Subtask 2",type:"item"}]}];var W=[{text:"Design Task 1",type:"item",children:[{text:"Subtask 1",type:"item"},{text:"Subtask 2",type:"item"}]}];var B=[{text:"custom Task 1",type:"item",children:[{text:"Subtask 1",type:"item"},{text:"Subtask 2",type:"item"}]}];function v(i,t,r){let f=o=>o.reduce((s,e)=>(s.push(e),e.children&&s.push(...f(e.children)),s),[]),d=f(r),u=o=>{if(!o.children||o.children.length===0)return i[o.text]?"selected":"unselected";let s=o.children.map(l=>u(l)),e=s.every(l=>l==="selected"),p=s.some(l=>l==="selected"||l==="indeterminate");return e?"selected":p?"indeterminate":"unselected"},k=(o,s)=>{t(e=>A(F({},e),{[o.text]:s})),o.children&&o.children.forEach(e=>k(e,s))};return{handleCheckboxClick:o=>{let s=u(o)!=="selected";k(o,s);let e=(p,l)=>{p.forEach(m=>{if(m.children){let C=u(m);t(a=>A(F({},a),{[m.text]:C==="selected"})),e(m.children,m)}if(l){let C=u(l);t(a=>A(F({},a),{[l.text]:C}))}})};e(r)},resetState:()=>{t({})},getItemState:u,calculateProgress:()=>{let o=d.filter(e=>i[e.text]).length;console.log("Flat Items:",d),console.log("Checked Count:",o);let s=d.length>0?o/d.length*100:0;return console.log("Calculated Progress:",s),s},flatItems:d}}var{widget:ct}=figma,{AutoLayout:w,Text:lt,SVG:U}=ct;function X({resetState:i,progressBarWidth:t,onBack:r}){return(t<=0||isNaN(t))&&(console.error("Invalid Progress Bar Width:",t),t=1),figma.widget.h(w,{direction:"horizontal",horizontalAlignItems:"start",verticalAlignItems:"center",height:n.navigation.height,fill:"#FFFFFF",spacing:29,padding:n.navigation.padding,width:570},figma.widget.h(w,{width:158,horizontalAlignItems:"start",verticalAlignItems:"center",onClick:r},figma.widget.h(U,{src:q}),figma.widget.h(lt,{fontSize:16,fill:c.primary,x:2},"\u041D\u0430\u0437\u0430\u0434")),figma.widget.h(w,{width:n.navigation.progress.width,height:n.navigation.progress.height,fill:c.secondary,cornerRadius:20,horizontalAlignItems:"start",verticalAlignItems:"center"},figma.widget.h(w,{width:t,height:"fill-parent",fill:c.primary,cornerRadius:20})),figma.widget.h(w,{width:158,horizontalAlignItems:"end",verticalAlignItems:"center"},figma.widget.h(U,{src:J,onClick:i})))}var{widget:Y}=figma,{useSyncedState:b,AutoLayout:N,Text:at}=Y;function ht(){let[i,t]=b("defineCheckedItems",{}),[r,f]=b("researchCheckedItems",{}),[d,u]=b("designCheckedItems",{}),[k,x]=b("customCheckedItems",{}),[g,y]=b("currentScreen","start"),o=v(i,t,P),s=v(r,f,T),e=v(d,u,W),p=v(k,x,B),l={define:o.calculateProgress(),research:s.calculateProgress(),design:e.calculateProgress(),custom:p.calculateProgress()},m=()=>y("start");return(()=>{if(g==="start")return figma.widget.h(K,{onSelectChecklist:y,progressStatuses:l});let a=[],h;if(g==="define"?(a=P,h=o):g==="research"?(a=T,h=s):g==="design"?(a=W,h=e):g==="custom"&&(a=B,h=p),!h||!a)return null;let S=h.calculateProgress();return figma.widget.h(N,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",height:"hug-contents",fill:"#FFFFFF",cornerRadius:n.cornerRadius,width:570,effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.12},offset:{x:0,y:6},blur:34,spread:0}]},figma.widget.h(X,{resetState:h.resetState,progressBarWidth:S/100*n.navigation.progress.width,onBack:m}),figma.widget.h(Q,{items:a,handleCheckboxClick:h.handleCheckboxClick,checkedItems:i,getItemState:h.getItemState}),h.getItemState(a[0])==="selected"&&figma.widget.h(N,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",width:"fill-parent",padding:{left:n.padding.horizontal,bottom:n.padding.bottom}},figma.widget.h(N,{width:n.button.width,height:n.button.height,fill:c.button,cornerRadius:n.button.cornerRadius,horizontalAlignItems:"center",verticalAlignItems:"center"},figma.widget.h(at,{fontSize:16,fill:c.buttonText},"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u044D\u0442\u0430\u043F"))))})()}Y.register(ht);})();
